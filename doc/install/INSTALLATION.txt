ğŸ“¦ Installation EditeurPanovisu sur Linux

Guide complet dâ€™installation de lâ€™application EditeurPanovisu sur un systÃ¨me
Linux vierge.

Version du guide : 1.0
Date : Octobre 2025
Build minimum requis : 3500

--------------------------------------------------------------------------------

ğŸ“‹ PrÃ©requis systÃ¨me

- OS : Ubuntu 20.04+ / Debian 11+ / distributions similaires
- Java : OpenJDK 25 (requis)
- RAM : 4 GB minimum, 8 GB recommandÃ©
- Espace disque : 500 MB pour lâ€™application + espace pour les projets
- Environnement graphique : X11 ou Wayland avec support OpenGL

--------------------------------------------------------------------------------

ğŸ”§ Installation des dÃ©pendances

1. Mise Ã  jour du systÃ¨me

    sudo apt update
    sudo apt upgrade -y

2. Installation de Java (OpenJDK 25)

    # Installer OpenJDK 25
    sudo apt install -y openjdk-25-jdk

    # Si OpenJDK 25 n'est pas disponible dans les dÃ©pÃ´ts par dÃ©faut :
    # Ajouter le PPA OpenJDK
    sudo add-apt-repository ppa:openjdk-r/ppa
    sudo apt update
    sudo apt install -y openjdk-25-jdk

    # VÃ©rifier l'installation
    java -version

La version doit afficher Java 25.

3. Installation de JavaFX avec support 3D

    # Installer tous les composants OpenJFX (critique pour le support 3D)
    sudo apt install -y openjfx libopenjfx-java libopenjfx-jni

    # VÃ©rifier que les bibliothÃ¨ques sont prÃ©sentes
    ls -la /usr/share/openjfx/lib/

Vous devriez voir des fichiers .so (bibliothÃ¨ques natives Linux).

4. Installation du support OpenGL

    # BibliothÃ¨ques Mesa OpenGL (essentielles pour JavaFX 3D)
    sudo apt install -y \
      libgl1-mesa-glx \
      libgl1-mesa-dri \
      libglu1-mesa \
      mesa-utils

    # BibliothÃ¨ques graphiques supplÃ©mentaires
    sudo apt install -y libglvnd0 libglvnd-dev libglfw3

5. (Optionnel) Pilotes GPU NVIDIA

Uniquement si vous avez une carte NVIDIA :

    # DÃ©tecter les pilotes disponibles
    ubuntu-drivers devices

    # Installer le pilote recommandÃ© (exemple: 535)
    sudo apt install -y nvidia-driver-535

    # RedÃ©marrer obligatoirement aprÃ¨s installation
    sudo reboot

6. VÃ©rification du support OpenGL

AprÃ¨s installation, vÃ©rifiez que OpenGL fonctionne :

    # Afficher la version OpenGL
    glxinfo | grep "OpenGL version"

    # VÃ©rifier le rendu direct (doit Ãªtre "Yes")
    glxinfo | grep "direct rendering"

    # Test visuel avec un cube 3D animÃ©
    glxgears

Sortie attendue :

    OpenGL version string: 4.x Mesa xx.x.x
    direct rendering: Yes

Si glxgears affiche des engrenages qui tournent, OpenGL fonctionne correctement.

7. (Optionnel) Installation OpenCL pour accÃ©lÃ©ration GPU

OpenCL permet dâ€™accÃ©lÃ©rer le traitement des images (redimensionnement, filtres).
Lâ€™application fonctionne parfaitement sans OpenCL (mode CPU automatique).

7.1. Installation de clinfo (outil de diagnostic)

    sudo apt install -y clinfo

7.2. VÃ©rifier le support OpenCL actuel

    clinfo

Si vous voyez Number of platforms: 0 â†’ Aucun pilote OpenCL installÃ© (normal)

7.3. Installer les pilotes OpenCL selon votre GPU

Pour NVIDIA (le plus courant) :

    # VÃ©rifier que les pilotes NVIDIA sont installÃ©s
    nvidia-smi

    # Installer OpenCL NVIDIA
    sudo apt install -y nvidia-opencl-icd nvidia-opencl-dev

    # VÃ©rifier
    clinfo | grep "Platform Name"
    # Devrait afficher: NVIDIA CUDA

Pour AMD :

    sudo apt install -y mesa-opencl-icd ocl-icd-opencl-dev

    # VÃ©rifier
    clinfo | grep "Platform Name"
    # Devrait afficher: Clover ou ROCm

Pour Intel (GPU intÃ©grÃ©) :

    sudo apt install -y intel-opencl-icd

    # VÃ©rifier
    clinfo | grep "Platform Name"
    # Devrait afficher: Intel(R) OpenCL

7.4. VÃ©rification complÃ¨te OpenCL

    # Afficher toutes les informations OpenCL
    clinfo

    # VÃ©rifier le nombre de plateformes
    clinfo | grep "Number of platforms"
    # Devrait afficher: Number of platforms: 1 (ou plus)

    # VÃ©rifier les devices
    clinfo | grep "Number of devices"
    # Devrait afficher: Number of devices: 1 (ou plus)

Performance avec OpenCL : - Redimensionnement images : 1.7Ã— plus rapide -
Affichage panoramas : 10Ã— plus rapide - Chargement visites : 3.4Ã— plus rapide

Sans OpenCL : Traitement CPU uniquement (fonctionne correctement, juste plus
lent)

--------------------------------------------------------------------------------

ğŸ“¥ Installation de lâ€™application

1. CrÃ©er le rÃ©pertoire dâ€™installation

Option recommandÃ©e : Installation systÃ¨me dans /opt

    sudo mkdir -p /opt/editeurpanovisu
    sudo chown $USER:$USER /opt/editeurpanovisu
    cd /opt/editeurpanovisu

Option alternative : Installation utilisateur

    # Installation dans le rÃ©pertoire personnel
    mkdir -p ~/editeurpanovisu
    cd ~/editeurpanovisu

  ğŸ’¡ Note : Le script de lancement dÃ©tecte automatiquement son rÃ©pertoire, vous
  pouvez donc installer lâ€™application nâ€™importe oÃ¹.

2. TÃ©lÃ©charger les fichiers

Option A : Depuis Windows via SCP

    # Depuis votre machine Windows (PowerShell)
    scp target/editeurPanovisu-3.3.3-SNAPSHOT.jar utilisateur@serveur:/opt/editeurpanovisu/
    scp lancer-editeur-panovisu.sh utilisateur@serveur:/opt/editeurpanovisu/
    scp -r theme utilisateur@serveur:/opt/editeurpanovisu/
    scp -r css utilisateur@serveur:/opt/editeurpanovisu/
    scp -r images utilisateur@serveur:/opt/editeurpanovisu/
    scp -r configPV utilisateur@serveur:/opt/editeurpanovisu/
    scp -r panovisu utilisateur@serveur:/opt/editeurpanovisu/

Option B : Via clÃ© USB

1.  Copiez tous les fichiers du projet sur une clÃ© USB
2.  Montez la clÃ© sur Linux et copiez les fichiers :

    cp /media/usb/editeurPanovisu-3.3.3-SNAPSHOT.jar /opt/editeurpanovisu/
    cp /media/usb/lancer-editeur-panovisu.sh /opt/editeurpanovisu/
    cp -r /media/usb/{theme,css,images,configPV,panovisu} /opt/editeurpanovisu/

3. CrÃ©er le script de lancement

Si vous nâ€™avez pas copiÃ© lancer-editeur-panovisu.sh, crÃ©ez-le :

    nano /opt/editeurpanovisu/lancer-editeur-panovisu.sh

Collez ce contenu :

    #!/bin/bash

    # Script de lancement EditeurPanovisu pour Linux avec support 3D
    # Build 3500+

    # DÃ©tecter automatiquement le rÃ©pertoire du script
    SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
    cd "$SCRIPT_DIR"

    # Variables d'environnement pour forcer JavaFX 3D
    export PRISM_FORCEGL=true
    export PRISM_FORCEGPU=true
    export PRISM_ORDER=es2,sw

    # Forcer OpenGL dans le systÃ¨me
    export LIBGL_ALWAYS_SOFTWARE=0
    export LIBGL_ALWAYS_INDIRECT=0

    echo "=== Lancement EditeurPanovisu ==="
    echo "RÃ©pertoire: $SCRIPT_DIR"
    echo "Configuration JavaFX 3D activÃ©e (ES2 Pipeline)"
    echo ""
    echo "=== Test OpenGL ==="
    glxinfo | grep "OpenGL version" || echo "âš ï¸  glxinfo non disponible"
    echo ""

    # Lancement de l'application
    java \
      --module-path /usr/share/openjfx/lib \
      --add-modules javafx.controls,javafx.fxml,javafx.web,javafx.swing,javafx.media \
      -Dprism.forceGPU=true \
      -Dprism.order=es2,sw \
      -jar editeurPanovisu-3.3.3-SNAPSHOT.jar 2>&1 | tee editeur-panovisu.log

    echo ""
    echo "=== Log sauvegardÃ© dans editeur-panovisu.log ==="

Sauvegardez avec Ctrl+O, EntrÃ©e, puis quittez avec Ctrl+X.

4. Rendre le script exÃ©cutable

    chmod +x /opt/editeurpanovisu/lancer-editeur-panovisu.sh

5. Structure finale des fichiers

Votre rÃ©pertoire /opt/editeurpanovisu doit contenir :

    /opt/editeurpanovisu/
    â”œâ”€â”€ editeurPanovisu-3.3.3-SNAPSHOT.jar   (application Java principale)
    â”œâ”€â”€ lancer-editeur-panovisu.sh           (script de lancement bash)
    â”œâ”€â”€ INSTALLATION.md                      (guide installation)
    â”œâ”€â”€ INSTALLATION.txt                     (version texte)
    â”œâ”€â”€ INSTALLATION.html                    (version HTML)
    â”œâ”€â”€ aide/                                (fichiers d'aide HTML)
    â”œâ”€â”€ configPV/                            (configurations utilisateur)
    â”œâ”€â”€ css/                                 (feuilles de style)
    â”œâ”€â”€ diaporama/                           (lecteur diaporama)
    â”œâ”€â”€ doc/                                 (documentation)
    â”‚   â”œâ”€â”€ PRESENTATION.md
    â”‚   â””â”€â”€ INSTALLATION_OLLAMA.md
    â”œâ”€â”€ images/                              (icÃ´nes et images)
    â”œâ”€â”€ pagesHTML/                           (pages HTML intÃ©grÃ©es)
    â”œâ”€â”€ panovisu/                            (visualiseur panoramique)
    â”œâ”€â”€ templates/                           (modÃ¨les de visite)
    â””â”€â”€ theme/                               (thÃ¨mes visuels)

--------------------------------------------------------------------------------

ğŸš€ Lancement de lâ€™application

PremiÃ¨re exÃ©cution

    cd /opt/editeurpanovisu
    ./lancer-editeur-panovisu.sh

Au premier lancement : - Lâ€™application peut prendre 10-15 secondes Ã  dÃ©marrer -
Un fichier editeur-panovisu.log sera crÃ©Ã© avec les logs dÃ©taillÃ©s - La
configuration sera initialisÃ©e dans ~/.config/editeurpanovisu/

VÃ©rification du support 3D

Dans les logs du terminal, cherchez ces lignes :

    Initialized prism pipeline: com.sun.prism.es2.ES2Pipeline
    Graphics Vendor: Mesa/NVIDIA/Intel
    OpenGL version: 4.x

âœ… ES2Pipeline = Support 3D activÃ©
âŒ SwPipeline = Mode logiciel uniquement (pas de 3D)

Test du visualiseur panoramique

1.  Lancez lâ€™application
2.  Ouvrez un projet existant ou crÃ©ez-en un nouveau
3.  Ajoutez une image panoramique Ã©quirectangulaire
4.  Cliquez sur lâ€™image dans la liste

RÃ©sultat attendu : - Le visualiseur 3D sâ€™affiche avec navigation interactive -
Vous pouvez faire pivoter la vue avec la souris - Les contrÃ´les de navigation
(boutons, boussole) sont visibles

Si vous voyez â€œFonction non supportÃ©eâ€ : - Le support 3D nâ€™est pas activÃ© -
Consultez la section DÃ©pannage ci-dessous

--------------------------------------------------------------------------------

ğŸ› DÃ©pannage

ProblÃ¨me : â€œFonction non supportÃ©eâ€ dans le visualiseur

Diagnostic :

    cd /opt/editeurpanovisu
    ./diagnostic-javafx-3d.sh

Regardez la ligne SCENE3D: dans les rÃ©sultats.

Solution si SCENE3D: false

1.  RÃ©installer OpenJFX complet :

        sudo apt purge openjfx libopenjfx-java libopenjfx-jni
        sudo apt autoremove
        sudo apt install -y openjfx libopenjfx-java libopenjfx-jni

2.  VÃ©rifier les pilotes GPU :

        # Pour NVIDIA
        nvidia-smi

        # Pour Intel/AMD (Mesa)
        glxinfo | grep renderer

3.  Forcer le rendu logiciel en dernier recours :

    Modifiez lancer-editeur-panovisu.sh :

        export LIBGL_ALWAYS_SOFTWARE=1
        export PRISM_ORDER=sw

ProblÃ¨me : Application ne dÃ©marre pas

1. VÃ©rifier Java :

    java -version
    # Doit afficher Java 25

2. VÃ©rifier le JAR :

    ls -lh editeurPanovisu-3.3.3-SNAPSHOT.jar
    # Doit faire ~50-80 MB

3. VÃ©rifier les permissions :

    chmod +x lancer-editeur-panovisu.sh
    chmod 644 editeurPanovisu-3.3.3-SNAPSHOT.jar

4. Consulter les logs :

    cat editeur-panovisu.log | grep -i error
    cat editeur-panovisu.log | grep -i exception

ProblÃ¨me : Erreur â€œmodule javafx.xxx not foundâ€

Solution :

    # VÃ©rifier l'emplacement d'OpenJFX
    ls /usr/share/openjfx/lib/

    # Si vide ou inexistant, rÃ©installer
    sudo apt install --reinstall openjfx

ProblÃ¨me : Images ne se chargent pas

VÃ©rifier les rÃ©pertoires de ressources :

    cd /opt/editeurpanovisu
    ls -R theme/ css/ images/

Si des dossiers manquent, recopiez-les depuis la version Windows.

ProblÃ¨me : Erreur OpenCL

Messages comme :

    âš ï¸  OpenCL non disponible sur ce systÃ¨me - Mode CPU activÃ©

Câ€™est normal ! Lâ€™application fonctionne sans OpenCL. OpenCL est optionnel pour
lâ€™accÃ©lÃ©ration GPU des transformations dâ€™images. Lâ€™application utilise
automatiquement le CPU comme fallback.

Pour activer OpenCL (optionnel) :

    # Pour NVIDIA
    sudo apt install -y nvidia-opencl-icd

    # Pour AMD
    sudo apt install -y mesa-opencl-icd

    # Pour Intel
    sudo apt install -y intel-opencl-icd

--------------------------------------------------------------------------------

ğŸ”„ Mise Ã  jour de lâ€™application

Pour mettre Ã  jour vers une nouvelle version :

    # 1. Sauvegarder vos projets
    cp -r ~/.config/editeurpanovisu ~/.config/editeurpanovisu.backup

    # 2. Remplacer le JAR
    cd /opt/editeurpanovisu
    mv editeurPanovisu-3.3.3-SNAPSHOT.jar editeurPanovisu-3.3.3-SNAPSHOT.jar.old
    # Copiez le nouveau JAR ici

    # 3. Mettre Ã  jour les ressources si nÃ©cessaire
    # Copiez theme/, css/, images/ mis Ã  jour

    # 4. Relancer l'application
    ./lancer-editeur-panovisu.sh

--------------------------------------------------------------------------------

ğŸ“ CrÃ©ation dâ€™un lanceur de bureau

Pour lancer lâ€™application depuis le menu dâ€™applications :

    nano ~/.local/share/applications/editeurpanovisu.desktop

Contenu :

    [Desktop Entry]
    Name=Editeur Panovisu
    Comment=Ã‰diteur de visites virtuelles panoramiques
    Exec=/opt/editeurpanovisu/lancer-editeur-panovisu.sh
    Icon=/opt/editeurpanovisu/images/logo.png
    Terminal=false
    Type=Application
    Categories=Graphics;Photography;

Sauvegardez et rendez exÃ©cutable :

    chmod +x ~/.local/share/applications/editeurpanovisu.desktop

Lâ€™application apparaÃ®tra dans votre menu Applications.

--------------------------------------------------------------------------------

ğŸ” Configuration multi-utilisateurs

Pour installer lâ€™application pour tous les utilisateurs :

    # 1. Installer dans /opt (dÃ©jÃ  fait)
    # 2. CrÃ©er un lanceur global
    sudo nano /usr/share/applications/editeurpanovisu.desktop

    # MÃªme contenu que ci-dessus

    # 3. Permissions
    sudo chmod 755 /opt/editeurpanovisu
    sudo chmod 755 /opt/editeurpanovisu/lancer-editeur-panovisu.sh
    sudo chmod 644 /opt/editeurpanovisu/editeurPanovisu-3.3.3-SNAPSHOT.jar

Chaque utilisateur aura sa propre configuration dans ~/.config/editeurpanovisu/.

--------------------------------------------------------------------------------

ğŸ“Š VÃ©rification de lâ€™installation

Script de test complet :

    #!/bin/bash
    echo "=== Test d'installation EditeurPanovisu ==="
    echo ""

    echo "1. Java version :"
    java -version
    echo ""

    echo "2. OpenJFX prÃ©sent :"
    ls /usr/share/openjfx/lib/ | grep javafx.graphics
    echo ""

    echo "3. OpenGL fonctionnel :"
    glxinfo | grep "OpenGL version"
    echo ""

    echo "4. Fichiers application :"
    ls -lh /opt/editeurpanovisu/editeurPanovisu-3.3.3-SNAPSHOT.jar
    echo ""

    echo "5. Script de lancement :"
    test -x /opt/editeurpanovisu/lancer-editeur-panovisu.sh && echo "âœ… ExÃ©cutable" || echo "âŒ Non exÃ©cutable"
    echo ""

    echo "=== Fin du test ==="

--------------------------------------------------------------------------------

ğŸ“ Support

Logs utiles pour le support

Si vous rencontrez un problÃ¨me, fournissez ces informations :

    # Version du systÃ¨me
    lsb_release -a

    # Version Java
    java -version

    # Version OpenGL
    glxinfo | grep "OpenGL version"

    # Paquets JavaFX installÃ©s
    dpkg -l | grep openjfx

    # DerniÃ¨res lignes du log
    tail -50 /opt/editeurpanovisu/editeur-panovisu.log

Fichiers de configuration

- Configuration utilisateur : ~/.config/editeurpanovisu/
- Projets par dÃ©faut : ~/PanovisuProjects/
- Logs : /opt/editeurpanovisu/editeur-panovisu.log

--------------------------------------------------------------------------------

âœ… Checklist dâ€™installation

- â˜ Java 25 installÃ© (requis)
- â˜ OpenJFX avec support 3D installÃ©
- â˜ Mesa OpenGL installÃ©
- â˜ glxgears fonctionne
- â˜ JAR copiÃ© dans /opt/editeurpanovisu/
- â˜ Ressources (theme, css, images) copiÃ©es
- â˜ Script lancer-editeur-panovisu.sh exÃ©cutable
- â˜ Application se lance sans erreur
- â˜ Visualiseur 3D fonctionne (pas de â€œfonction non supportÃ©eâ€)
- â˜ Logs montrent â€œES2Pipeline initializedâ€

--------------------------------------------------------------------------------

Date de derniÃ¨re mise Ã  jour : 22 octobre 2025
Version du guide : 1.0
Build testÃ© : 3500
